<html>
  <head>
    <title>Pruebas</title>
  </head>
  <body>
    <div>
      <h1>Sitio test</h1>
    </div>
	  <p>Ambiente de desarrollo....</p>
    
    <div>
      <script type="text/javascript">
        if (!window._laq) {
          window._laq = [];
        }
        window._laq.push(function () {
          liveagent.showWhenOnline(
            "5736f000000PX1w",
            document.getElementById("liveagent_button_online_5736f000000PX1w")
          );
          liveagent.showWhenOffline(
            "5736f000000PX1w",
            document.getElementById("liveagent_button_offline_5736f000000PX1w")
          );
        });
      </script>
    </div>

    <script type='text/javascript'>
        function initEmbeddedMessaging() {
            try {
                // Configuración de idioma
                embeddedservice_bootstrap.settings.language = 'es_MX'; 

                // 1. CREA una variable para almacenar la URL
                var currentURL = window.location.href;
            
                // 2. CONFIGURA los datos extra de Pre-Chat
                //    ***Asegúrate de que 'transcriptFields' use el Nombre API correcto.***
                embeddedservice_bootstrap.settings.extraPrechatFormDetails = [{
                    "label": "URL del Sitio", // Etiqueta que vería el agente (si se muestra)
                    "value": currentURL,     // Valor capturado (la URL del navegador)
                    "displayToAgent": true,
                    // Utiliza el NOMBRE API de tu campo en MessagingSession o LiveChatTranscript.
                    "transcriptFields": ["GOC_URL__c"] // <--- **AJUSTA ESTO**
                }];

                embeddedservice_bootstrap.init(
                    '00DDG00000N95FE',
                    'Chatbot_web',
                    'https://gocar--developer.sandbox.my.site.com/ESWChatbotweb1745223554757',
                    {
                        scrt2URL: 'https://gocar--developer.sandbox.my.salesforce-scrt.com'
                    }
                );
            } catch (err) {
                console.error('Error loading Embedded Messaging: ', err);
            }
        };
    </script>
    <script type='text/javascript' src='https://gocar--developer.sandbox.my.site.com/ESWChatbotweb1745223554757/assets/js/bootstrap.min.js' onload='initEmbeddedMessaging()'></script>
  </body>
</html>
